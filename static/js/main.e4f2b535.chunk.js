(this["webpackJsonpminiapp-client"]=this["webpackJsonpminiapp-client"]||[]).push([[0],{267:function(e,t,n){"use strict";n.r(t);n(177),n(206),n(208),n(209),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(252);var c=n(0),i=n.n(c),r=n(38),a=n.n(r),s=n(26),o=n.n(s);n(88);function l(){var e=window.navigator.userAgent.toLowerCase(),t=e.match(/android\s([0-9\.]*)/);return-1===e.indexOf("chrome/6")&&(!!t&&parseInt(t[1],10))}function d(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(e[1],10)}return!1}var u=n(89),j=n(90),h=n(94),b=n(93),p=n(10),O=n(268),f=n(5),x=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(f.jsx)(p.n,{children:Object(f.jsx)(p.j,{children:Object(f.jsx)(p.l,{icon:Object(f.jsx)(O.a,{width:56,height:56}),header:"\u0421\u0435\u0440\u0432\u0438\u0441 \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u043d\u0435 \u0438\u0437 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435",children:"\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u0435\u0440\u0432\u0438\u0441\u0430, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0435\u0433\u043e \u0447\u0435\u0440\u0435\u0437 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u0432\u0435\u0431 \u0438\u043b\u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u0438 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"})})})}}]),n}(i.a.Component),m=n(31),g=n.n(m),v=n(42),w=n(39),y=function(e){var t=e.id,n=e.fetchedUser,i=Object(c.useState)(7792332),r=Object(w.a)(i,2),a=r[0],s=r[1],l=Object(c.useState)(),d=Object(w.a)(l,2),u=(d[0],d[1]),j=Object(c.useState)(""),h=Object(w.a)(j,2),b=h[0],O=h[1];Object(c.useEffect)((function(){MR.init({clientId:"a012c87cf88949fb86ae4d9c6a86dfe2",onlogin:function(e){e.status;var t=e.user;console.log("MR.state:",e,t),u(t?Object(f.jsx)("table",{cellspacing:"10",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{valign:"top",children:Object(f.jsx)("img",{src:t.image,width:"60"})}),Object(f.jsxs)("td",{children:[Object(f.jsxs)("h2",{children:[" ",t.first_name]}),Object(f.jsx)("pre",{children:"' + JSON.stringify(user, null, 2) + '"})]})]})}):Object(f.jsx)("h2",{children:":("}))},onshow:function(e){console.warn("onshow",e)},onclose:function(e){console.warn("onclose",e)}})}),[]);var x=function(){var e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a,e.next=3,o.a.send("VKWebAppOpenApp",{app_id:t,location:"test_hash"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("https://vkminiapp-login-igx.vercel.app/","test","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=600,height=600").postMessage("miniapp-client","*"),window.addEventListener("message",(function(e){O(JSON.stringify(e.data))}),!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(p.j,{id:t,children:[Object(f.jsx)(p.k,{children:"miniapp-client"}),n&&Object(f.jsx)(p.g,{header:Object(f.jsx)(p.h,{mode:"secondary",children:"User Data Fetched with VK Bridge"}),children:Object(f.jsx)(p.m,{before:n.photo_200?Object(f.jsx)(p.c,{src:n.photo_200}):null,description:n.city&&n.city.title?n.city.title:"",children:"".concat(n.first_name," ").concat(n.last_name)})}),Object(f.jsx)(p.g,{children:Object(f.jsxs)(p.f,{children:[Object(f.jsx)(p.e,{children:Object(f.jsx)(p.i,{value:a,onChange:function(e){return s(parseInt(e.target.value))}})}),Object(f.jsx)(p.e,{children:Object(f.jsx)(p.d,{size:"l",onClick:x,children:"auth"})})]})}),Object(f.jsx)(p.g,{children:Object(f.jsx)(p.d,{stretched:!0,size:"l",onClick:function(){var e=window.open("https://account.mail.ru/login","test","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=600,height=600");setTimeout((function(){e.close()}),3e3)},children:"window.open login, will close after 3sec"})}),Object(f.jsx)(p.g,{children:Object(f.jsx)("div",{style:{height:40},className:"mailru-login-button","data-type":"login","data-ui":"userpic login_as"})}),Object(f.jsx)(p.g,{children:Object(f.jsx)(p.d,{stretched:!0,size:"l",onClick:m,children:"window.open login miniapp"})}),b&&Object(f.jsx)(p.g,{header:b})]})},k=function(){var e=Object(c.useState)(null),t=Object(w.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){function e(){return(e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,i(t),setPopout(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.a.subscribe((function(e){var t=e.detail,n=t.type,c=t.data;if("VKWebAppUpdateConfig"===n){var i=document.createAttribute("scheme");i.value=c.scheme?c.scheme:"client_light",document.body.attributes.setNamedItem(i)}console.log("bridge.subscribe",n,c)})),function(){e.apply(this,arguments)}()}),[]),Object(f.jsx)(p.a,{children:Object(f.jsx)(p.b,{children:Object(f.jsx)(p.n,{activePanel:"home",children:Object(f.jsx)(y,{id:"home",fetchedUser:n})})})})};o.a.send("VKWebAppInit");var _=document.getElementById("root");a.a.render(Object(f.jsx)(k,{}),document.getElementById("root")),window.location.search.replace("?","").split("&").reduce((function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e}),{}).vk_platform,!(l()&&l()<=4)||d()&&d()<=8?a.a.render(Object(f.jsx)(k,{}),_):a.a.render(Object(f.jsx)(x,{}),_)}},[[267,1,2]]]);
//# sourceMappingURL=main.e4f2b535.chunk.js.map